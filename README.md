## 简答题

### 1、Webpack 的构建流程主要有哪些环节？如果可以请尽可能详尽的描述 Webpack 打包的整个过程。

- **初始化配置参数** 根据在命令中输入的参数以及`webpack.config.js`文件中的参数配置和`webpack`默认的参数配置，得到完整的参数配置。

- **构建编译对象** 根据上一步得到的最终配置初始化一个`compiler`对象，注册所有的插件`Plugin`，监听`webpack`构建过程的生命周期事件。

- **确定编译入口** 根据`webpack.config.js`文件中的`entry`入口，解析文件，构建`AST`语法树，找出入口文件依赖，递归构建解析。

- **递归编译模块** 递归解析依赖模块过程中，根据文件的类型和所对应的`Loader`配置，调用相应的`loader`对不同的文件做不同的解析编译转换处理，再找出该模块依赖的模块，然后递归本步骤，直到项目中依赖的所有模块都经过了本步骤的编译处理。

- **输出编译结果** 递归编译结束后，得到每个文件结果，包含转换后的模块以及他们之间的依赖关系，根据`entry`以及`output` 等配置生成代码块`chunk`文件并写入文件系统。

### 2、Loader 和 Plugin 有哪些不同？请描述一下开发 Loader 和 Plugin 的思路。

- Loader可以理解为资源文件加载器，可以加载资源文件并进行处理。webpack默认只能解析js文件，Loader则为webpack提供了解析非js文件的能力。但Loader仅支持输出处理结果到文件。可以通过webpack配置文件中的module.rules配置资源文件的文件名和Loader的匹配关系，指定不同后缀名的文件使用不同的Loader的去加载及处理。

- Plugin可以理解为插件，它可以监听到webpack各个生命周期的广播事件，然后通过将自己编写的任务挂载到webpack提供的这些事件钩子上对构建过程进行操作，所以可以通过Plugin对整个webpack构建打包过程进行全面的改造，从而完成各种功能需求。

#### Loader开发思路

- 1、确定最初输入源和预期达到的最终输出结果

- 2、将从输入到输出需要进行的操作分步化，确定每一步需要进行的操作

- 3、根据每一步编写相关Loader，最后进行链式调用

#### Plugin开发思路

- 1、确定想要完成的功能需求需要用到webpack的哪些事件Hooks及需要使用到的webpack实例属性

- 2、在插件函数的prototype上定义一个apply方法对webpack实例进行相关功能操作，并在功能完成后调用webpack提供的回调

